// Make sure that mandatory/default features continue to exist.

if d.Get("name").(string) == "rbacrolebindingactuation" {
  getUrl, err := tpgresource.ReplaceVars(d, config, "{{"{{"}}GKEHub2BasePath{{"}}"}}projects/{{"{{"}}project{{"}}"}}/locations/{{"{{"}}location{{"}}"}}/features/{{"{{"}}name{{"}}"}}")
  if err != nil {
  	return err
  }
  _, err = transport_tpg.SendRequest(transport_tpg.SendRequestOptions{
  	Config:    config,
  	Method:    "GET",
  	Project:   billingProject,
  	RawURL:    getUrl,
  	UserAgent: userAgent,
  	Headers:   headers,
  })
  
  if err == nil {
  	// Fleet feature exists as expected
  	log.Printf("[DEBUG] Fleet feature already exists %s", d.Get("name"))
  	id, err := tpgresource.ReplaceVars(d, config, "{{$.GetIdFormat}}")
    if err != nil {
      return fmt.Errorf("Error constructing id: %s", err)
    }
    d.SetId(id)
    // Clear the allowed custom roles.
    // log.Printf("[DEBUG] the spec inside d looks like %v", d.Get("spec"))
    // d.Set("spec", map[string]interface{}{"rbacrolebindingactuation": map[string]interface{}{"allowedCustomRoles": []string{}}})
    // log.Printf("[DEBUG] the spec inside d after the update looks like %v", d.Get("spec"))
    // d.Set("spec", nil)
    // log.Printf("[DEBUG] the spec inside d after the update looks like %v", d.Get("spec"))
    // d.Set("spec.rbacrolebindingactuation.allowed_custom_roles", []string{})
    // log.Printf("[DEBUG] the spec inside d after the update looks like %v", d.Get("spec"))
    // oidc := d.Get("oidc")
		// clientSecret := oidc.([]interface{})[0].(map[string]interface{})["client_secret"]
		// clientSecretValue := clientSecret.([]interface{})[0].(map[string]interface{})["value"]
		// clientSecretValue.([]interface{})[0].(map[string]interface{})["plain_text"] = updatedOidcClientSecret

    spec := d.Get("spec")
    log.Printf("[DEBUG] the spec looks like %v", spec)
    rrbActuationFeature := spec.([]interface{})[0].(map[string]interface{})["rbacrolebindingactuation"]
    rrbActuationFeature.([]interface{})[0].(map[string]interface{})["allowed_custom_roles"] = []string{}
    log.Printf("[DEBUG] the spec after the update looks like %v", spec)
    
    if err := d.Set("spec", spec); err != nil {
			return err
		}
    return resourceGKEHub2FeatureUpdate(d, meta)
  }
}
